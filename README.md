### Что умеет бот?

- **Распознаёт длинные аудио**: Обрабатывает записи совещаний до 1 часа (в отличие от большинства платных сервисов, которые ограничиваются короткими сообщениями).
    
- **Понимает русскую речь**: Точно распознаёт имена, названия и профессиональную терминологию благодаря сервису Сбер Салют — лучшему решению для русского языка (проверено на практике!). На Freemium-тарифе доступно 100 минут в месяц бесплатно.
    
- **Создаёт PDF**: Формирует документ с текстом, разбитым по спикерам, для удобного хранения.
    
- **Резюмирует с помощью ИИ**: Использует API DeepSeek для краткого саммари с ключевыми выводами — быстро и недорого.
    
- **Хранит историю**: Локальная база данных позволяет искать информацию по прошлым совещаниям. Просто спросите: "Что обсуждали месяц назад?" или "Когда впервые упомянули этот проект?".
    
- **Анализирует эмоции**: Оценивает тон встречи (позитивный, нейтральный, негативный), чтобы лучше понять её атмосферу.
    

### Почему это круто для музеев?

Этот бот — DIY-решение для малобюджетных проектов. Он экономит время, упрощает документацию и делает работу с аудиозаписями доступной даже для небольших музеев. Я протестировал разные библиотеки: Whisper (слабовато с русскими именами), Яндекс SpeechKit (лучше, но не идеал). Сбер Салют оказался настоящей находкой, особенно после опытов с распознаванием голоса для IP-телефонии.


Полный код

Он готов к работе, но нужно добавить ключи и настроить окружение.

# Настройка шаг за шагом

## Регистрация бота в Telegram:

Откройте Telegram и найдите @BotFather.
Напишите /start, затем /newbot.
Укажите имя (например, "MuseumPunkBot") и username (например, @MuseumPunkBot).
Сохраните токен (выглядит как 123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11).
Вставьте токен в код: telegram_token="ВАШ_TELEGRAM_TOKEN".


## Получение ключей API:

### Сбер Салют:
Зарегистрируйтесь в Salute Studio.
https://developers.sber.ru/studio/workspaces/
Создайте проект, выберите "SaluteSpeech" и получите client_id и client_secret.
Вставьте в код: client_id="ВАШ_CLIENT_ID", client_secret="ВАШ_CLIENT_SECRET".
Freemium-тариф даёт 100 минут распознавания бесплатно в месяц.


### DeepSeek:
Зарегистрируйтесь на DeepSeek Platform
Пополните баланс, - он очень дешевый, так что можно на пару долларов
Можно рублями через Плати Маркет https://plati.market/search/DEEP%20SEEK%20api
https://platform.deepseek.com/
Получите API-ключ и вставьте в код: DEEPSEEK_API_KEY="ВАШ_КЛЮЧ".


##Скачивание сертификата Сбер Салют:

Перейдите в документацию Сбер Салют.
https://www.sberbank.ru/ru/person/kibrary/materialy-po-temam/sertifikaty-tls
скачайте файл russian_trusted_root_ca.cer.
Сохраните его в папке проекта (например, C:/path/to/russian_trusted_root_ca.cer).
Укажите путь в коде: CERT_PATH="путь/к/russian_trusted_root_ca.cer".


## Скачивание шрифта DejaVu:

Бот использует шрифт DejaVuSans для генерации PDF с поддержкой кириллицы.
Скачайте DejaVuSans.ttf с официального сайта или FontSquirrel.
[https://github.com/dejavu-fonts/dejavu-fonts](https://dejavu-fonts.github.io/)
Поместите файл в папку проекта.
Убедитесь, что код указывает на файл: pdf.add_font("DejaVu", "", "DejaVuSans.ttf", uni=True).


## Установка зависимостей:

Установите Python 3.8+.
Установите библиотеки:pip install aiohttp python-telegram-bot sqlite3 fpdf pydub ffmpeg-python


Установите ffmpeg:
Скачайте с официального сайта.
Добавьте ffmpeg в PATH или установите через пакетный менеджер (например, brew install ffmpeg на macOS или apt-get install ffmpeg на Linux).


## Запуск бота:

Откройте терминал в VSCode.
Перейдите в папку с telegram_canticum_bot.py: cd путь/к/папке.
Запустите: python telegram_canticum_bot.py.
Отправьте боту аудио (до 1 часа) — он вернёт PDF, саммари и аналитику эмоций.


Код был создан для музейного телеграм канала "Музейный панк" https://t.me/museumpunk
